# Ses verilerine giriÅŸ

Ses dalgasÄ± doÄŸasÄ± gereÄŸi sÃ¼rekli bir sinyaldir, yani belirli bir zamanda sonsuz sayÄ±da sinyal deÄŸeri iÃ§erir. Bu durum sonlu dizileri bekleyen dijital cihazlar iÃ§in sorun yaratÄ±r. Bu tip veriler dijital cihazlar tarafÄ±ndan iÅŸlenmeden, depolanmadan ve iletilmeden Ã¶nce Ã¶nce sÃ¼rekli ses dalgasÄ±nÄ±n bir dizi ayrÄ±k deÄŸere dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi gerekmektedir. Buna dijital temsil de denir. 

Herhangi bir ses verisetine baktÄ±ÄŸÄ±nÄ±zda, ses Ã¶rneklerini iÃ§eren dijital dosyalar bulacaksÄ±nÄ±z. Bu Ã¶rneklerin arasÄ±nda metin anlamÄ± ya da mÃ¼zik parÃ§alarÄ± bulabilir, `.wav` (Dalgaformu Ses DosyasÄ±), `.flac` (Ãœcretsiz KayÄ±psÄ±z Ses KodlayÄ±cÄ±) ve `.mp3` (MPEG-1 Ses KatmanÄ± 3) gibi farklÄ± dosya formatlarÄ±yla karÅŸÄ±laÅŸabilirsiniz. Bu formatlar temelde ses sinyalinin dijital temsilini nasÄ±l sÄ±kÄ±ÅŸtÄ±rdÄ±klarÄ±na gÃ¶re farklÄ±lÄ±klar gÃ¶sterirler.

Åimdi bir sÃ¼rekli sinyalden bu temsile nasÄ±l ulaÅŸtÄ±ÄŸÄ±mÄ±za bir gÃ¶z atalÄ±m. Analog sinyal Ã¶nce bir mikrofon tarafÄ±ndan yakalanÄ±r ve ses dalgalarÄ±nÄ± elektriksel bir sinyale dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r. Elektriksel sinyal, Ã¶rnekleme yoluyla dijital temsil elde etmek iÃ§in bir Analog-Dijital DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼ tarafÄ±ndan sayÄ±sallaÅŸtÄ±rÄ±lÄ±r.

## Ã–rnekleme ve Ã¶rnekleme oranÄ±

Ã–rnekleme, sÃ¼rekli bir sinyalin deÄŸerini sabit zaman aralÄ±klarÄ±nda Ã¶lÃ§me iÅŸlemidir. Ã–rnekleme yapÄ±lmÄ±ÅŸ dalga formu, sabit aralÄ±klarla ayrÄ±k sinyal deÄŸerlerini iÃ§erdiÄŸi iÃ§in ayrÄ±k bir ÅŸekildedir.

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/Signal_Sampling.png" alt="Signal sampling illustration">
</div>

*Wikipedia makalesinden Ã¶rnek: [Ã–rneklem (sinyal iÅŸleme)](https://tr.wikipedia.org/wiki/%C3%96rnekleme_(sinyal_i%C5%9Fleme))*

**Ã–rnekleme hÄ±zÄ±** (aynÄ± zamanda Ã¶rnekleme frekansÄ± olarak da adlandÄ±rÄ±lÄ±r), bir saniyede alÄ±nan Ã¶rnek sayÄ±sÄ±dÄ±r ve hertz (Hz) cinsinden Ã¶lÃ§Ã¼lÃ¼r. Bir referans noktasÄ± vermek gerekirse, CD kalitesindeki sesin Ã¶rnekleme hÄ±zÄ± 44.100 Hz'dir, yani saniyede 44.100 Ã¶rnek alÄ±nÄ±r. KarÅŸÄ±laÅŸtÄ±rma yapmak iÃ§in, yÃ¼ksek Ã§Ã¶zÃ¼nÃ¼rlÃ¼klÃ¼ sesin Ã¶rnekleme hÄ±zÄ± 192.000 Hz veya 192 kHz'dir. KonuÅŸma modellerini eÄŸitirken yaygÄ±n olarak kullanÄ±lan bir Ã¶rnekleme hÄ±zÄ± ise 16.000 Hz veya 16 kHz'dir.

Ã–rnekleme hÄ±zÄ± seÃ§imi sinyalden yakalanabilen en yÃ¼ksek frekansÄ± belirler. Bu aynÄ± zamanda Nyquist sÄ±nÄ±rÄ± olarak bilinir ve tam olarak Ã¶rnekleme hÄ±zÄ±nÄ±n yarÄ±sÄ±dÄ±r. Ä°nsan konuÅŸmasÄ±ndaki iÅŸitilebilir frekanslar 8 kHz'nin altÄ±ndadÄ±r, bu nedenle konuÅŸmayÄ± 16 kHz'de Ã¶rneklemek yeterlidir. Daha yÃ¼ksek bir Ã¶rnekleme hÄ±zÄ± kullanmak daha fazla bilgiyi yakalamaz ve sadece bu tÃ¼r dosyalarÄ±n iÅŸlenmesinin hesap maliyetini artÄ±rÄ±r. Ã–te yandan, Ã§ok dÃ¼ÅŸÃ¼k bir Ã¶rnekleme hÄ±zÄ±nda sesi Ã¶rneklemek bilgi kaybÄ±na neden olur. 8 kHz'de Ã¶rneklenen konuÅŸma, bu hÄ±zda yÃ¼ksek frekanslarÄ± yakalayamadÄ±ÄŸÄ± iÃ§in donuk bir ses Ã§Ä±karacaktÄ±r.

Herhangi bir ses gÃ¶revi Ã¼zerinde Ã§alÄ±ÅŸÄ±rken, veri kÃ¼mesindeki tÃ¼m ses Ã¶rneklerinin aynÄ± Ã¶rnekleme hÄ±zÄ±na sahip olduÄŸundan emin olmak Ã¶nemlidir. Ã–neÄŸitimli bir modeli Ã¶zelleÅŸtirmek iÃ§in Ã¶zel ses veriseti kullanmayÄ± planlÄ±yorsanÄ±z, modelin Ã¶nceden eÄŸitildiÄŸi verilerin Ã¶rnekleme hÄ±zÄ± ve verilerinizin Ã¶rnekleme hÄ±zÄ± aynÄ± olmalÄ±dÄ±r. Ã–rnekleme hÄ±zÄ±, ardÄ±ÅŸÄ±k ses Ã¶rnekleri arasÄ±ndaki zaman aralÄ±ÄŸÄ±nÄ± belirler ve ses verilerinin zamansal Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ etkiler. Ã–rneÄŸin, 16.000 Hz Ã¶rnekleme hÄ±zÄ±nda 5 saniyelik bir ses, 80.000 deÄŸerin bir dizisi olarak temsil edilir, aynÄ± 5 saniyelik ses 8.000 Hz Ã¶rnekleme hÄ±zÄ±nda ise 40.000 deÄŸerin bir dizisi olarak temsil edilir. Ses gÃ¶revlerini Ã§Ã¶zen transformer modelleri, Ã¶rnekleri diziler olarak ele alÄ±r. Bu modeller ses verisinin temsilini Ã¶ÄŸrenen dikkat mekanizmalarÄ±na dayanÄ±r. Ã–rnekleme hÄ±zlarÄ± farklÄ± olan ses Ã¶rnekleri iÃ§in diziler farklÄ± olduÄŸu iÃ§in, modellerin Ã¶rnekleme hÄ±zlarÄ± arasÄ±nda genelleme yapmasÄ± zor olacaktÄ±r. **Yeniden Ã¶rnekleme** ses Ã¶rneklerinin Ã¶rnekleme hÄ±zlarÄ±nÄ± eÅŸleÅŸtirmek iÃ§in kullanÄ±lan bir iÅŸlemdir ve ses verilerini [Ã¶n iÅŸleme](preprocessing#resampling-the-audio-data) iÅŸleminin bir parÃ§asÄ±dÄ±r.

## Genlik ve bit derinliÄŸi

Ã–rnekleme oranÄ± size Ã¶rneklerin ne sÄ±klÄ±kta alÄ±ndÄ±ÄŸÄ±nÄ± sÃ¶yler. Peki, her bir Ã¶rnekteki deÄŸerler tam olarak nedir?

Ses, insanlar tarafÄ±ndan duyulabilir frekansta hava basÄ±ncÄ±ndaki deÄŸiÅŸikliklerle oluÅŸur. Bir sesin **genliÄŸi**, herhangi bir anki ses basÄ±nÃ§ seviyesini tanÄ±mlar ve decibel (dB) cinsinden Ã¶lÃ§Ã¼lÃ¼r. GenliÄŸi sesin yÃ¼ksekliÄŸi olarak algÄ±larÄ±z. Ã–rnek vermek gerekirse, normal bir konuÅŸma sesi 60 dB'nin altÄ±ndadÄ±r ve bir rock konseri insan iÅŸitme sÄ±nÄ±rlarÄ±nÄ± zorlayacak ÅŸekilde yaklaÅŸÄ±k olarak 125 dB'de olabilir.

Dijital seste, her ses Ã¶rneÄŸi bir zaman noktasÄ±nda ses dalgasÄ±nÄ±n genliÄŸini kaydeder. Ã–rneÄŸin **bit derinliÄŸi**, bu genlik deÄŸerinin ne kadar hassasiyetle tanÄ±mlanabileceÄŸini belirler. YÃ¼ksek bit derinliÄŸi, dijital temsilin orijinal sÃ¼rekli ses dalgasÄ±na ne kadar doÄŸru bir ÅŸekilde yaklaÅŸtÄ±ÄŸÄ±na iÅŸaret eder.

En yaygÄ±n ses bit derinlikleri 16 bit ve 24 bittir. Ä°kisi de ikili bir terimdir, genlik deÄŸerinin sÃ¼rekli olarak ayrÄ±ksallaÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda kaÃ§ farklÄ± adÄ±ma ayrÄ±ksallaÅŸtÄ±rÄ±labileceÄŸini temsil eder. Bu ayrÄ±ksallaÅŸtÄ±rma 16-bit ses iÃ§in 65,536 adÄ±m, 24-bit ses iÃ§in 16,777,216 adÄ±mdÄ±r. Ã‡Ã¼nkÃ¼ ayrÄ±ksallaÅŸtÄ±rma, sÃ¼rekli deÄŸeri ayrÄ±ksallaÅŸtÄ±rÄ±lmÄ±ÅŸ bir deÄŸere yuvarlama iÅŸlemi iÃ§erdiÄŸinden, Ã¶rnekleme iÅŸlemi gÃ¼rÃ¼ltÃ¼ ekler. Bit derinliÄŸi ne kadar yÃ¼ksekse, bu ayrÄ±ksallaÅŸtÄ±rma gÃ¼rÃ¼ltÃ¼sÃ¼ o kadar kÃ¼Ã§Ã¼ktÃ¼r. Pratikte, 16-bit sesin ayrÄ±ksalaÅŸtÄ±rma gÃ¼rÃ¼ltÃ¼sÃ¼ zaten iÅŸitilemeyecek kadar kÃ¼Ã§Ã¼ktÃ¼r, ve daha yÃ¼ksek bit derinliklerini kullanmanÄ±za gerek kalmaz.

32-bit sese de rastlayabilirsiniz. 32-bit ses Ã¶rnekleri gerÃ§el olarak saklar, oysa 16-bit ve 24-bit ses tamsayÄ± Ã¶rnekleri kullanÄ±r. 32-bit gerÃ§el sayÄ± hassasiyeti 24 bit olarak kabul edilir, bu da ona 24-bit sesle aynÄ± bit derinliÄŸini verir. GerÃ§el sayÄ±lÄ± ses Ã¶rneklerinin [-1.0, 1.0] aralÄ±ÄŸÄ± iÃ§inde bulunmasÄ± beklenir. Makine Ã¶ÄŸrenme modelleri doÄŸal olarak gerÃ§el sayÄ±larla Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan, ses Ã¶nce gerÃ§el sayÄ± formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmelidir. Bunun nasÄ±l yapÄ±lacaÄŸÄ±nÄ± [Ã–niÅŸleme](preprocessing) bÃ¶lÃ¼mÃ¼nde gÃ¶receÄŸiz.

SÃ¼rekli ses sinyalleri gibi, dijital sesin genliÄŸi genellikle desibel (dB) cinsinden ifade edilir. Ä°nsan iÅŸitmesi logaritmik olduÄŸundan dolayÄ± - kulaklarÄ±mÄ±z seslerdeki kÃ¼Ã§Ã¼k dalgalanmalara yÃ¼ksek seslerden daha hassastÄ±r - bir sesin yÃ¼ksekliÄŸi, genliklerin de logaritmik olan desibel cinsinden ifade edilmesiyle daha kolay yorumlanÄ±r. GerÃ§ek dÃ¼nya sesi iÃ§in desibel Ã¶lÃ§eÄŸi 0 dB'den baÅŸlar, bu da insanlarÄ±n duyabileceÄŸi en sessiz sesi temsil eder ve daha yÃ¼ksek sesler daha bÃ¼yÃ¼k deÄŸerlere sahiptir. Ancak dijital ses sinyalleri iÃ§in 0 dB en yÃ¼ksek genlikken, diÄŸer tÃ¼m genlikler negatiftir. HÄ±zlÄ± bir kural olarak: her -6 dB, genliÄŸin yarÄ± yarÄ±ya azalmasÄ± anlamÄ±na gelir ve genellikle -60 dB'nin altÄ±ndaki her ÅŸey, sesi gerÃ§ekten yÃ¼ksek bir ses seviyesine Ã§Ä±karmazsanÄ±z iÅŸitilemez.

## Dalga biÃ§imi olarak ses

Seslerin zaman iÃ§indeki Ã¶rnek deÄŸerlerinin ve deÄŸiÅŸimlerinin **dalga formu** olarak gÃ¶rselleÅŸtirildiÄŸini gÃ¶rmÃ¼ÅŸ olabilirsiniz.
Bu aynÄ± zamanda sesin *zaman alanÄ±* temsili olarak da bilinir.

Bu tÃ¼r gÃ¶rselleÅŸtirmeler, sinyalin zamanlamasÄ±, ses olaylarÄ±, sinyalin genel ses yÃ¼ksekliÄŸi ve seste mevcut olan herhangi bir dÃ¼zensizlik veya gÃ¼rÃ¼ltÃ¼leri gibi sinyalin belli Ã¶zelliklerini tanÄ±mlamada kullanÄ±lÄ±r

Bir ses sinyalinin dalga biÃ§imini Ã§izmek iÃ§in 'librosa' adlÄ± bir Python kÃ¼tÃ¼phanesini kullanabiliriz:

```bash
pip install librosa
```

KÃ¼tÃ¼phaneyle birlikte gelen "trumpet" adlÄ± ses Ã¶rneÄŸini ele alalÄ±m:

```py
import librosa

array, sampling_rate = librosa.load(librosa.ex("trumpet"))
```

Bu Ã¶rnek, ses zaman serisi (burada buna 'dizi' diyoruz) ve Ã¶rnekleme hÄ±zÄ±ndan ('sampling_rate') oluÅŸan bir demet olarak yÃ¼klenir.
Librosa'nÄ±n `waveshow()` fonksiyonunu kullanarak bu sesin dalga formuna bir gÃ¶z atalÄ±m:

```py
import matplotlib.pyplot as plt
import librosa.display

plt.figure().set_figwidth(12)
librosa.display.waveshow(array, sr=sampling_rate)
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/waveform_plot.png" alt="Waveform plot">
</div>


Bu, sinyalin genliÄŸini y ekseni Ã¼zerinde ve zamanÄ± x ekseni boyunca Ã§izer. BaÅŸka bir deyiÅŸle, her bir nokta, Ã¶rnekleme sÄ±rasÄ±nda alÄ±nan tek bir Ã¶rnek deÄŸerine karÅŸÄ±lÄ±k gelir. AyrÄ±ca, librosa sesi genliÄŸi [-1.0, 1.0] arasÄ±nda gerÃ§el sayÄ±lÄ± deÄŸerler olarak dÃ¶ndÃ¼rÃ¼r.

GÃ¶rselleÅŸtirme, ses verilerini dinlerken Ã¼zerinde Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ±z verileri anlamak iÃ§in kullanÄ±ÅŸlÄ± bir araÃ§tÄ±r. Sinyalin ÅŸeklini gÃ¶rebilir, Ã¶rÃ¼ntÃ¼leri gÃ¶zlemleyebilir, gÃ¼rÃ¼ltÃ¼ veya bozulma belirlemeyi Ã¶ÄŸrenebilirsiniz. Veriyi normalizasyon, yeniden Ã¶rnekleme veya filtreleme gibi bazÄ± yÃ¶ntemlerle Ã¶niÅŸlediyseniz, Ã¶niÅŸleme adÄ±mlarÄ±nÄ±n doÄŸru bir ÅŸekilde uygulandÄ±ÄŸÄ±nÄ± gÃ¶rselden doÄŸrulayabilirsiniz. Bir modeli eÄŸittikten sonra (Ã¶rneÄŸin, ses sÄ±nÄ±flandÄ±rma gÃ¶revinde) hata oluÅŸan Ã¶rnekleri gÃ¶rselleÅŸtirebilir ve sorunu gidermek iÃ§in kullanabilirsiniz.

## Frekans spektrumu

Ses verilerini gÃ¶rselleÅŸtirmenin baÅŸka bir yolu da *frekans alanÄ±* olarak da bilinen bir ses sinyalinin **frekans spektrumunu** Ã§izmektir.
Spektrum, ayrÄ±k Fourier dÃ¶nÃ¼ÅŸÃ¼mÃ¼ veya DFT kullanÄ±larak hesaplanÄ±r. Spektrum, sinyali oluÅŸturan her bir frekansÄ± ve ne kadar gÃ¼Ã§lÃ¼ olduÄŸunu tarif eder.

Numpy'nin `rfft()` fonksiyonunu kullanarak DFT'yi alarak aynÄ± trompet sesi iÃ§in frekans spektrumunu Ã§izelim.
TÃ¼m sesin spektrumunu Ã§izmek mÃ¼mkÃ¼nse de, bunun yerine kÃ¼Ã§Ã¼k bir bÃ¶lgeye bakmak daha kullanÄ±ÅŸlÄ±dÄ±r. AÅŸaÄŸÄ±da,
ilk 4096 Ã¶rneÄŸin DFT'sini alalÄ±m, bu aÅŸaÄŸÄ± yukarÄ± Ã§alÄ±nan ilk notanÄ±n uzunluÄŸuna eÅŸit olacak.

```py
import numpy as np

dft_input = array[:4096]

# DFT hesaplama
window = np.hanning(len(dft_input))
windowed_input = dft_input * window
dft = np.fft.rfft(windowed_input)

# genlik spektrumunu desibel cinsinden elde edin
amplitude = np.abs(dft)
amplitude_db = librosa.amplitude_to_db(amplitude, ref=np.max)

# frekans aralÄ±klarÄ±nÄ± alÄ±n
frequency = librosa.fft_frequencies(sr=sampling_rate, n_fft=len(dft_input))

plt.figure().set_figwidth(12)
plt.plot(frequency, amplitude_db)
plt.xlabel("Frequency (Hz)")
plt.ylabel("Amplitude (dB)")
plt.xscale("log")
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/spectrum_plot.png" alt="Spectrum plot">
</div>

Bu, bu ses bÃ¶lÃ¼mÃ¼nde mevcut olan Ã§eÅŸitli frekans bileÅŸenlerinin gÃ¼cÃ¼nÃ¼ gÃ¶sterir. Frekans deÄŸerleri aÃ§Ä±k
x ekseni genellikle logaritmik Ã¶lÃ§ekte Ã§izilir, genlikleri ise y ekseni Ã¼zerindedir.

Ã‡izdiÄŸimiz frekans spektrumu birkaÃ§ tepe noktasÄ± gÃ¶steriyor. Bu tepeler notanÄ±n harmoniklerine karÅŸÄ±lÄ±k gelir.
yÃ¼ksek harmonikler daha sessiz olacak ÅŸekilde Ã§alÄ±nÄ±r. Ä°lk zirve 620 Hz civarÄ±nda olduÄŸundan, bu bir Eâ™­ notasÄ±nÄ±n frekans spektrumudur.

DFT'nin Ã§Ä±ktÄ±sÄ±, gerÃ§el ve sanal bileÅŸenlerden oluÅŸan karmaÅŸÄ±k sayÄ±larÄ±n bir dizisidir. `np.abs(dft)` ile bÃ¼yÃ¼klÃ¼k, spektrogramdan genlik bilgisini elde eder. GerÃ§ek ve sanal bileÅŸenler arasÄ±ndaki aÃ§Ä±, faz spektrumunu saÄŸlar, ancak bu genellikle makine Ã¶ÄŸrenme uygulamalarÄ±nda atlanÄ±r veya kullanÄ±lmaz.

Genlik deÄŸerlerini desibel Ã¶lÃ§eÄŸine dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in `librosa.amplitude_to_db()` kullandÄ±nÄ±z, bÃ¶ylece spektrumdaki daha ince ayrÄ±ntÄ±larÄ± gÃ¶rmeyi kolaylaÅŸtÄ±rdÄ±nÄ±z. Bazen insanlar genlik yerine enerjiyi Ã¶lÃ§en **gÃ¼Ã§ spektrumunu** kullanÄ±r;
bu basitÃ§e genlik deÄŸerlerinin karesi olan bir spektrumdur.

<Tip>
ğŸ’¡ Pratikte insanlar FFT terimini DFT ile birbirinin yerine kullanÄ±rlar Ã§Ã¼nkÃ¼ FFT veya HÄ±zlÄ± Fourier DÃ¶nÃ¼ÅŸÃ¼mÃ¼ DFT'yi bilgisayarda hesaplamak iÃ§in tek etkili yÃ¶ntemdir.
</Tip>

Bir ses sinyalinin frekans spektrumu, dalga formuyla aynÄ± bilgiyi iÃ§erir. Bunlar aynÄ± veriye (burada trompet sesinden ilk 4096 Ã¶rnek) bakmanÄ±n iki farklÄ± yoludur. Dalga formunun genliÄŸe karÅŸÄ± zaman iÃ§inde Ã§izdiÄŸi yerde, spektrum her bir frekansÄ±n genliÄŸini sabit bir noktada gÃ¶rselleÅŸtirir.


## Spektrogram

Bir ses sinyalindeki frekanslarÄ±n deÄŸiÅŸimini nasÄ±l gÃ¶rselleÅŸtirebiliriz? Trompet birkaÃ§ nota Ã§alÄ±yor ve hepsinde
farklÄ± frekanslar var. Sorun, spektrumun yalnÄ±zca belirli bir andaki frekanslarÄ±n donmuÅŸ anlÄ±k gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ gÃ¶stermesidir.
Ã‡Ã¶zÃ¼m, her biri yalnÄ±zca kÃ¼Ã§Ã¼k bir zaman dilimini kapsayan birden fazla DFT almak ve elde edilen spektrumlarÄ± bir araya toplayÄ±p **spektrogram**a dÃ¶nÃ¼ÅŸtÃ¼rmektir. 

Spektrogram, zaman iÃ§inde deÄŸiÅŸen bir ses sinyalinin frekans iÃ§eriÄŸini Ã§izer. ZamanÄ±, frekansÄ± ve genliÄŸi tek bir grafikte gÃ¶rmenizi saÄŸlar Bu hesaplamayÄ± gerÃ§ekleÅŸtiren algoritma STFT veya KÄ±sa ZamanlÄ± Fourier DÃ¶nÃ¼ÅŸÃ¼mÃ¼dÃ¼r.

Spektrogram, kullanabileceÄŸiniz en bilgilendirici ses araÃ§larÄ±ndan biridir. Ã–rneÄŸin bir mÃ¼zik kaydÄ±yla Ã§alÄ±ÅŸÄ±rken,
Ã§eÅŸitli enstrÃ¼manlarÄ± ve vokal parÃ§alarÄ±nÄ± ve bunlarÄ±n genel sese nasÄ±l katkÄ±da bulunduÄŸunu gÃ¶rebilirsiniz. KonuÅŸma verisinde ise
her sesli harf belirli frekanslarla karakterize edildiÄŸinden farklÄ± sesli harfleri gÃ¶rebilirsiniz.

Librosa'nÄ±n "stft()" ve "specshow()" iÅŸlevlerini kullanarak aynÄ± trompet sesi iÃ§in bir spektrogram Ã§izelim:

```py
import numpy as np

D = librosa.stft(array)
S_db = librosa.amplitude_to_db(np.abs(D), ref=np.max)

plt.figure().set_figwidth(12)
librosa.display.specshow(S_db, x_axis="time", y_axis="hz")
plt.colorbar()
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/spectrogram_plot.png" alt="Spectrogram plot">
</div>

Bu Ã§izimde, x ekseni dalga biÃ§imi gÃ¶rselleÅŸtirmesinde olduÄŸu gibi zamanÄ± temsil eder, ancak y ekseni Hz cinsinden frekansÄ± temsil eder.
Rengin yoÄŸunluÄŸu, zamanÄ±n her noktasÄ±nda frekans bileÅŸeninin desibel (dB) cinsinden Ã¶lÃ§Ã¼len genliÄŸini veya gÃ¼cÃ¼nÃ¼ verir.

Spektrogram, genellikle birkaÃ§ milisaniye sÃ¼ren ses sinyalinin kÄ±sa segmentlerini alÄ±p, her segmentin frekans spektrumunu elde etmek iÃ§in ayrÄ±k Fourier dÃ¶nÃ¼ÅŸÃ¼mÃ¼nÃ¼ hesaplayarak oluÅŸturulur. Elde edilen spektrumlar daha sonra zaman ekseni Ã¼zerine Ã¼st Ã¼ste konur ve spektrogramu oluÅŸturmak iÃ§in bir araya getirilir. Bu gÃ¶rÃ¼ntÃ¼de her dikey dilim, Ã¼stten gÃ¶rÃ¼ldÃ¼ÄŸÃ¼nde tek bir frekans spektrumuna karÅŸÄ±lÄ±k gelir. VarsayÄ±lan olarak, `librosa.stft()` ses sinyalini 2048 Ã¶rneklik segmentlere bÃ¶ler, bu da frekans Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼ ve zaman Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼ arasÄ±nda iyi bir denge saÄŸlar.

Spektrogram ve dalga formu, aynÄ± verinin farklÄ± gÃ¶rÃ¼nÃ¼mleridir, bu nedenle spektrogramu orijinal dalga formuna dÃ¶ndÃ¼rmek mÃ¼mkÃ¼ndÃ¼r, ancak bunun iÃ§in genlik bilgisi dÄ±ÅŸÄ±nda faz bilgisine de ihtiyaÃ§ vardÄ±r. EÄŸer spektrogram bir makine Ã¶ÄŸrenme modeli tarafÄ±ndan Ã¼retildiyse, genellikle yalnÄ±zca genlikleri Ã§Ä±karÄ±r. Bu durumda, Griffin-Lim gibi klasik bir faz yeniden yapÄ±landÄ±rma algoritmasÄ± veya bir vokoder olarak adlandÄ±rÄ±lan bir sinir aÄŸÄ± kullanarak spektrogramdan bir dalga formunu yeniden oluÅŸturabilirsiniz.

Spektrogramlar yalnÄ±zca gÃ¶rselleÅŸtirme iÃ§in kullanÄ±lmaz. BirÃ§ok makine Ã¶ÄŸrenimi modeli, girdi olarak spektrogramlarÄ± alÄ±r,
dalga formlarÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r ve Ã§Ä±ktÄ± olarak spektrogramlar Ã¼retir.

ArtÄ±k spektrogramÄ±n ne olduÄŸunu ve nasÄ±l yapÄ±ldÄ±ÄŸÄ±nÄ± bildiÄŸimize gÃ¶re, konuÅŸma iÅŸlemede yaygÄ±n olarak kullanÄ±lan bir Ã§eÅŸidine bakalÄ±m: mel spektrogramÄ±.

## Mel spektrogramÄ±

Mel spektrogramÄ±, konuÅŸma iÅŸleme ve makine Ã¶ÄŸrenimi gÃ¶revlerinde yaygÄ±n olarak kullanÄ±lan spektrogramÄ±n bir Ã§eÅŸididir.
Bir ses sinyalinin zaman iÃ§indeki frekans iÃ§eriÄŸini ancak farklÄ± bir frekans ekseninde gÃ¶stermesi bakÄ±mÄ±ndan spektrograma benzer.

Standart bir spektrogramda frekans ekseni doÄŸrusaldÄ±r ve hertz (Hz) cinsinden Ã¶lÃ§Ã¼lÃ¼r. Ancak insanÄ±n iÅŸitme sistemi
dÃ¼ÅŸÃ¼k frekanslardaki deÄŸiÅŸikliklere yÃ¼ksek frekanslardan daha duyarlÄ±dÄ±r ve bu duyarlÄ±lÄ±k frekans arttÄ±kÃ§a logaritmik olarak azalÄ±r. Mel Ã¶lÃ§eÄŸi, insan kulaÄŸÄ±nÄ±n doÄŸrusal olmayan frekans tepkisine yaklaÅŸan algÄ±sal bir Ã¶lÃ§ektir.

Bir mel spektrogramÄ± oluÅŸturmak iÃ§in ses verisini kÄ±sa parÃ§alara ayÄ±rÄ±p frekans spektrumlarÄ± elde edilir. Bunun iÃ§in STFT kullanÄ±lÄ±r.
Ek olarak, frekanslarÄ± mel Ã¶lÃ§eÄŸi dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in, her spektrum mel filtre bankasÄ± olarak adlandÄ±rÄ±lan bir dizi filtre aracÄ±lÄ±ÄŸÄ±yla gÃ¶nderilir.

TÃ¼m bu adÄ±mlarÄ± bizim iÃ§in gerÃ§ekleÅŸtiren librosa'nÄ±n `melspectrogram()` fonksiyonunu kullanarak bir mel spektrogramÄ±nÄ± nasÄ±l Ã§izebileceÄŸimizi gÃ¶relim:

```py
S = librosa.feature.melspectrogram(y=array, sr=sampling_rate, n_mels=128, fmax=8000)
S_dB = librosa.power_to_db(S, ref=np.max)

plt.figure().set_figwidth(12)
librosa.display.specshow(S_dB, x_axis="time", y_axis="mel", sr=sampling_rate, fmax=8000)
plt.colorbar()
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/mel-spectrogram.png" alt="Mel spectrogram plot">
</div>

YukarÄ±daki Ã¶rnekte, `n_mels`, oluÅŸturulacak mel bantlarÄ±nÄ±n sayÄ±sÄ±nÄ± ifade eder. Mel bantlarÄ±, spektrumu insan iÅŸitmesinin farklÄ± frekanslara nasÄ±l tepki verdiÄŸini taklit etmek iÃ§in seÃ§ilen bir dizi filtre kullanarak algÄ±sal olarak anlamlÄ± bileÅŸenlere bÃ¶len frekans aralÄ±klarÄ±nÄ± tanÄ±mlar. `n_mels` iÃ§in yaygÄ±n deÄŸerler 40 veya 80'dir. `fmax`, Ã¶nem verdiÄŸimiz en yÃ¼ksek frekansÄ± (Hz cinsinden) belirtir.

DÃ¼zenli bir spektrogramda olduÄŸu gibi, mel frekans bileÅŸenlerinin gÃ¼cÃ¼nÃ¼ desibel cinsinden ifade etmek yaygÄ±n bir uygulamadÄ±r. Bu genellikle bir **log-mel spektrogramu* olarak adlandÄ±rÄ±lÄ±r, Ã§Ã¼nkÃ¼ desibellere dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi logaritmik bir iÅŸlem iÃ§erir. YukarÄ±daki Ã¶rnek, `librosa.feature.melspectrogram()` olarak `librosa.power_to_db()` kullanarak gÃ¼Ã§ spektrogramÄ± oluÅŸturur.

<Tip>
ğŸ’¡ TÃ¼m mel spektrogramlarÄ± aynÄ± deÄŸildir! YaygÄ±n olarak kullanÄ±lan iki farklÄ± mel Ã¶lÃ§eÄŸi vardÄ±r ("htk" ve "slaney"), ve gÃ¼Ã§ spektrogramÄ± yerine genlik spektrogramÄ± kullanÄ±labilir. Log-mel spektrogramÄ±na dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi her zaman gerÃ§ek desibelleri hesaplamaz, sadece `log`larÄ±nÄ± alabilir. Bu nedenle, bir makine Ã¶ÄŸrenme modeli girdi olarak bir mel spektrogramÄ± bekliyorsa, bunu aynÄ± ÅŸekilde hesapladÄ±ÄŸÄ±nÄ±zdan emin olmak iÃ§in kontrol edin.
</Tip>

Bir mel spektrogramÄ± oluÅŸturmak, sinyali filtrelemeyi iÃ§erdiÄŸi iÃ§in kayÄ±plÄ± bir iÅŸlemdir. Bir mel spektrogramÄ±nÄ± bir dalga formuna dÃ¶nÃ¼ÅŸtÃ¼rmek, bir dÃ¼zenli spektrogram iÃ§in bunu yapmaktan daha zordur, Ã§Ã¼nkÃ¼ daha Ã¶nce kaybedilen frekanslarÄ± tahmin etmeyi gerektirir. Bu nedenle, mel spektrogramÄ±ndan bir dalga formu Ã¼retmek iÃ§in HiFiGAN vokoder gibi makine Ã¶ÄŸrenme modellerine ihtiyaÃ§ vardÄ±r.

Standart bir spektrogramla karÅŸÄ±laÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda, bir mel spektrogramÄ± ses sinyalinin daha anlamlÄ± Ã¶zelliklerini yakalayabilir.
Bu, mel spektrogramÄ±nÄ±, konuÅŸma tanÄ±ma, konuÅŸmacÄ±yÄ± tanÄ±mlama ve mÃ¼zik tÃ¼rÃ¼ sÄ±nÄ±flandÄ±rmasÄ± gibi gÃ¶revlerde onu popÃ¼ler bir seÃ§im haline getiriyor.

ArtÄ±k ses verisi Ã¶rneklerini nasÄ±l gÃ¶rselleÅŸtireceÄŸinizi bildiÄŸinize gÃ¶re, en sevdiÄŸiniz seslerin nasÄ±l gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nÃ¼ gÃ¶rmeye Ã§alÄ±ÅŸÄ±n. :)
