# Ses verilerine giriÅŸ

DoÄŸasÄ± gereÄŸi, bir ses dalgasÄ± sÃ¼rekli bir sinyaldir, yani belirli bir zamanda sonsuz sayÄ±da sinyal deÄŸeri iÃ§erir. Bu, sonlu dizileri bekleyen dijital cihazlar iÃ§in sorun teÅŸkil eder. Dijital cihazlar tarafÄ±ndan iÅŸlenmesi, depolanmasÄ± ve iletilmesi iÃ§in sÃ¼rekli ses dalgasÄ±, dijital bir temsil olarak adlandÄ±rÄ±lan bir dizi ayrÄ±k deÄŸere dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi gerekmektedir.

Herhangi bir ses veri kÃ¼mesine baktÄ±ÄŸÄ±nÄ±zda, ses Ã¶rneklerini iÃ§eren dijital dosyalar bulacaksÄ±nÄ±z, bu Ã¶rnekler metin anlatÄ±mÄ± veya mÃ¼zik gibi olabilir. .wav (Dalgaformu Ses DosyasÄ±), .flac (Ãœcretsiz KayÄ±psÄ±z Ses KodlayÄ±cÄ±) ve .mp3 (MPEG-1 Ses KatmanÄ± 3) gibi farklÄ± dosya formatlarÄ±yla karÅŸÄ±laÅŸabilirsiniz. Bu formatlar, ses sinyalinin dijital temsilini nasÄ±l sÄ±kÄ±ÅŸtÄ±rdÄ±klarÄ±nda temel farklÄ±lÄ±klar gÃ¶sterirler.


Åimdi bir sÃ¼rekli sinyalden bu temsile nasÄ±l ulaÅŸtÄ±ÄŸÄ±mÄ±za bir gÃ¶z atalÄ±m. Analog sinyal Ã¶nce bir mikrofon tarafÄ±ndan yakalanÄ±r ve ses dalgalarÄ±nÄ± elektriksel bir sinyale dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r. Elektriksel sinyal, Ã¶rnekleme yoluyla dijital temsil elde etmek iÃ§in bir Analog-Dijital DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼ tarafÄ±ndan sayÄ±sallaÅŸtÄ±rÄ±lÄ±r.

## Ã–rnekleme ve Ã¶rnekleme oranÄ±

Ã–rnekleme, sÃ¼rekli bir sinyalin deÄŸerini sabit zaman aralÄ±klarÄ±nda Ã¶lÃ§me iÅŸlemidir. Ã–rnekleme yapÄ±lmÄ±ÅŸ dalga formu, sabit aralÄ±klarla ayrÄ±k sinyal deÄŸerlerini iÃ§erdiÄŸi iÃ§in ayrÄ±k bir ÅŸekildedir.

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/Signal_Sampling.png" alt="Signal sampling illustration">
</div>

*Wikipedia makalesinden Ã¶rnek: [Ã–rneklem (sinyal iÅŸleme)](https://en.wikipedia.org/wiki/Sampling_(signal_processing))*

**Ã–rnekleme hÄ±zÄ±** (aynÄ± zamanda Ã¶rnekleme frekansÄ± olarak da adlandÄ±rÄ±lÄ±r), bir saniyede alÄ±nan Ã¶rnek sayÄ±sÄ±dÄ±r ve hertz (Hz) cinsinden Ã¶lÃ§Ã¼lÃ¼r. Bir referans noktasÄ± vermek gerekirse, CD kalitesindeki sesin Ã¶rnekleme hÄ±zÄ± 44.100 Hz'dir, yani saniyede 44.100 Ã¶rnek alÄ±nÄ±r. KarÅŸÄ±laÅŸtÄ±rma yapmak iÃ§in, yÃ¼ksek Ã§Ã¶zÃ¼nÃ¼rlÃ¼klÃ¼ sesin Ã¶rnekleme hÄ±zÄ± 192.000 Hz veya 192 kHz'dir. KonuÅŸma modellerini eÄŸitirken yaygÄ±n olarak kullanÄ±lan bir Ã¶rnekleme hÄ±zÄ± ise 16.000 Hz veya 16 kHz'dir.


Ã–rnekleme hÄ±zÄ± seÃ§imi Ã¶ncelikle sinyalden yakalanabilen en yÃ¼ksek frekansÄ± belirler. Bu aynÄ± zamanda Nyquist sÄ±nÄ±rÄ± olarak bilinir ve tam olarak Ã¶rnekleme hÄ±zÄ±nÄ±n yarÄ±sÄ±dÄ±r. Ä°nsan konuÅŸmasÄ±ndaki iÅŸitilebilir frekanslar 8 kHz'nin altÄ±ndadÄ±r, bu nedenle konuÅŸmayÄ± 16 kHz'de Ã¶rneklemek yeterlidir. Daha yÃ¼ksek bir Ã¶rnekleme hÄ±zÄ± kullanmak daha fazla bilgiyi yakalamaz ve sadece bu tÃ¼r dosyalarÄ±n iÅŸlenmesinin hesaplama maliyetini artÄ±rÄ±r. Ã–te yandan, Ã§ok dÃ¼ÅŸÃ¼k bir Ã¶rnekleme hÄ±zÄ±nda sesi Ã¶rneklemek bilgi kaybÄ±na neden olur. 8 kHz'de Ã¶rneklenen konuÅŸma, bu hÄ±zda yÃ¼ksek frekanslarÄ± yakalayamadÄ±ÄŸÄ± iÃ§in donuk bir ses Ã§Ä±karacaktÄ±r.

Herhangi bir ses gÃ¶revi Ã¼zerinde Ã§alÄ±ÅŸÄ±rken, veri kÃ¼mesindeki tÃ¼m ses Ã¶rneklerinin aynÄ± Ã¶rnekleme hÄ±zÄ±na sahip olduÄŸundan emin olmak Ã¶nemlidir. Ã–nceden eÄŸitilmiÅŸ bir modeli Ã¶zelleÅŸtirmek iÃ§in Ã¶zel ses verilerini kullanmayÄ± planlÄ±yorsanÄ±z, verilerinizin Ã¶rnekleme hÄ±zÄ±, modelin Ã¶nceden eÄŸitildiÄŸi verilerin Ã¶rnekleme hÄ±zÄ±yla uyumlu olmalÄ±dÄ±r. Ã–rnekleme hÄ±zÄ±, ardÄ±ÅŸÄ±k ses Ã¶rnekleri arasÄ±ndaki zaman aralÄ±ÄŸÄ±nÄ± belirler ve ses verilerinin zamansal Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ etkiler. Bir Ã¶rnek dÃ¼ÅŸÃ¼nÃ¼n: 16.000 Hz Ã¶rnekleme hÄ±zÄ±nda 5 saniyelik bir ses, 80.000 deÄŸerin bir dizisi olarak temsil edilecektir, aynÄ± 5 saniyelik ses 8.000 Hz Ã¶rnekleme hÄ±zÄ±nda ise 40.000 deÄŸerin bir dizisi olarak temsil edilecektir. Ses gÃ¶revlerini Ã§Ã¶zen Transformer modelleri, Ã¶rnekleri diziler olarak ele alÄ±r ve sesi veya Ã§oklu moda temsilini Ã¶ÄŸrenmek iÃ§in dikkat mekanizmalarÄ±na dayanÄ±r. Ã–rnekleme hÄ±zlarÄ± farklÄ± olan ses Ã¶rnekleri iÃ§in diziler farklÄ± olduÄŸu iÃ§in, modellerin Ã¶rnekleme hÄ±zlarÄ± arasÄ±nda genelleme yapmasÄ± zor olacaktÄ±r. **Yeniden Ã¶rnekleme** ses Ã¶rneklerinin Ã¶rnekleme hÄ±zlarÄ±nÄ± eÅŸleÅŸtirmek iÃ§in kullanÄ±lan bir iÅŸlemdir ve ses verilerini [Ã¶n iÅŸleme](preprocessing#resampling-the-audio-data) iÅŸleminin bir parÃ§asÄ±dÄ±r.

## Genlik ve bit derinliÄŸi

Ã–rnekleme oranÄ± size Ã¶rneklerin ne sÄ±klÄ±kta alÄ±ndÄ±ÄŸÄ±nÄ± sÃ¶ylerken, her bir Ã¶rnekteki deÄŸerler tam olarak nedir?

Ses, insanlar tarafÄ±ndan duyulabilir frekansta hava basÄ±ncÄ±ndaki deÄŸiÅŸikliklerle oluÅŸur. Bir sesin **genliÄŸi**, herhangi bir anki ses basÄ±nÃ§ seviyesini tanÄ±mlar ve decibel (dB) cinsinden Ã¶lÃ§Ã¼lÃ¼r. GenliÄŸi sesin yÃ¼ksekliÄŸi olarak algÄ±larÄ±z. Ã–rnek vermek gerekirse, normal bir konuÅŸma sesi 60 dB'nin altÄ±ndadÄ±r ve bir rock konseri insan iÅŸitme sÄ±nÄ±rlarÄ±nÄ± zorlayacak ÅŸekilde yaklaÅŸÄ±k olarak 125 dB'de olabilir.

Dijital sesde, her ses Ã¶rneÄŸi bir zaman noktasÄ±nda ses dalgasÄ±nÄ±n genliÄŸini kaydeder. Ã–rneÄŸin **bit derinliÄŸi**, bu genlik deÄŸerinin ne kadar hassasiyetle tanÄ±mlanabileceÄŸini belirler. Bit derinliÄŸi ne kadar yÃ¼ksekse, dijital temsilin orijinal sÃ¼rekli ses dalgasÄ±nÄ± ne kadar sadÄ±k bir ÅŸekilde yaklaÅŸtÄ±rdÄ±ÄŸÄ± o kadar iyidir.

En yaygÄ±n ses bit derinlikleri 16 bit ve 24 bittir. Her biri, genlik deÄŸerinin sÃ¼rekli olarak ayrÄ±ksalaÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda kaÃ§ farklÄ± adÄ±ma ayrÄ±ksalaÅŸtÄ±rÄ±labileceÄŸini temsil eden ikili bir terimdir: 16-bit ses iÃ§in 65,536 adÄ±m, 24-bit ses iÃ§in inanÄ±lmaz 16,777,216 adÄ±mdÄ±r. Ã‡Ã¼nkÃ¼ ayrÄ±ksalaÅŸtÄ±rma, sÃ¼rekli deÄŸeri ayrÄ±ksalaÅŸtÄ±rÄ±lmÄ±ÅŸ bir deÄŸere yuvarlama iÅŸlemi iÃ§erdiÄŸinden, Ã¶rnekleme iÅŸlemi gÃ¼rÃ¼ltÃ¼ ekler. Bit derinliÄŸi ne kadar yÃ¼ksekse, bu ayrÄ±ksalaÅŸtÄ±rma gÃ¼rÃ¼ltÃ¼sÃ¼ o kadar kÃ¼Ã§Ã¼ktÃ¼r. Pratikte, 16-bit sesin ayrÄ±ksalaÅŸtÄ±rma gÃ¼rÃ¼ltÃ¼sÃ¼ zaten iÅŸitilemeyecek kadar kÃ¼Ã§Ã¼ktÃ¼r ve daha yÃ¼ksek bit derinliklerini kullanmak genellikle gerekli deÄŸildir.


32-bit sesi de gÃ¶rebilirsiniz. Bu, Ã¶rnekleri kayan noktalÄ± deÄŸerler olarak saklar, oysa 16-bit ve 24-bit ses tamsayÄ± Ã¶rnekleri kullanÄ±r. 32-bit kayan noktalÄ± bir deÄŸerin hassasiyeti 24 bit olarak kabul edilir, bu da ona 24-bit sesle aynÄ± bit derinliÄŸini verir. Kayan noktalÄ± ses Ã¶rneklerinin [-1.0, 1.0] aralÄ±ÄŸÄ± iÃ§inde bulunmasÄ± beklenir. Makine Ã¶ÄŸrenme modelleri doÄŸal olarak kayan noktalÄ± verilerle Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan, ses Ã¶nce kayan noktalÄ± formata dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmelidir, bÃ¶ylece modeli eÄŸitmek iÃ§in kullanÄ±labilir. Bunun nasÄ±l yapÄ±lacaÄŸÄ±nÄ± [Ã–niÅŸleme](preprocessing) bÃ¶lÃ¼mÃ¼nde gÃ¶receÄŸiz.

SÃ¼rekli ses sinyalleri gibi, dijital sesin genliÄŸi genellikle desibel (dB) cinsinden ifade edilir. Ä°nsan iÅŸitmesinin doÄŸal olarak logaritmik olduÄŸu bir gerÃ§ektir - kulaklarÄ±mÄ±z seslerdeki kÃ¼Ã§Ã¼k dalgalanmalara yÃ¼ksek seslerden daha hassastÄ±r - bir sesin yÃ¼ksekliÄŸi, genliklerin de logaritmik olan desibel cinsinden ifade edilmesiyle daha kolay yorumlanÄ±r. GerÃ§ek dÃ¼nya sesi iÃ§in desibel Ã¶lÃ§eÄŸi 0 dB'den baÅŸlar, bu da insanlarÄ±n duyabileceÄŸi en sessiz sesi temsil eder ve daha yÃ¼ksek sesler daha bÃ¼yÃ¼k deÄŸerlere sahiptir. Ancak dijital ses sinyalleri iÃ§in 0 dB en yÃ¼ksek genlikken, diÄŸer tÃ¼m genlikler negatiftir. HÄ±zlÄ± bir kural olarak: her -6 dB, genliÄŸin yarÄ± yarÄ±ya azalmasÄ± anlamÄ±na gelir ve genellikle -60 dB'nin altÄ±ndaki her ÅŸey, sesi gerÃ§ekten yÃ¼ksek bir ses seviyesine Ã§Ä±karmazsanÄ±z iÅŸitilemez.

## Dalga biÃ§imi olarak ses

Seslerin zaman iÃ§indeki Ã¶rnek deÄŸerleri gÃ¶steren ve deÄŸiÅŸiklikleri gÃ¶steren **dalga formu** olarak gÃ¶rselleÅŸtirildiÄŸini gÃ¶rmÃ¼ÅŸ olabilirsiniz.
sesin genliÄŸinde. Bu aynÄ± zamanda sesin *zaman alanÄ±* temsili olarak da bilinir.


Bu tÃ¼r gÃ¶rselleÅŸtirme, bireysel sinyalin zamanlamasÄ± gibi ses sinyalinin belirli Ã¶zelliklerini tanÄ±mlamak iÃ§in kullanÄ±ÅŸlÄ±dÄ±r.
ses olaylarÄ±, sinyalin genel ses yÃ¼ksekliÄŸi ve seste mevcut olan herhangi bir dÃ¼zensizlik veya gÃ¼rÃ¼ltÃ¼.


Bir ses sinyalinin dalga biÃ§imini Ã§izmek iÃ§in 'librosa' adlÄ± bir Python kÃ¼tÃ¼phanesini kullanabiliriz:

```bash
pip install librosa
```

KÃ¼tÃ¼phaneyle birlikte gelen "trumpet" adlÄ± Ã¶rnek sesi ele alalÄ±m:

```py
import librosa

array, sampling_rate = librosa.load(librosa.ex("trumpet"))
```

Ã–rnek, ses zaman serisi (burada buna 'dizi' diyoruz) ve Ã¶rnekleme hÄ±zÄ±ndan ('sampling_rate') oluÅŸan bir demet olarak yÃ¼klenir.
Librosa'nÄ±n `waveshow()` fonksiyonunu kullanarak bu sesin dalga formuna bir gÃ¶z atalÄ±m:

```py
import matplotlib.pyplot as plt
import librosa.display

plt.figure().set_figwidth(12)
librosa.display.waveshow(array, sr=sampling_rate)
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/waveform_plot.png" alt="Waveform plot">
</div>


Bu, sinyalin genliÄŸini y ekseni Ã¼zerinde ve zamanÄ± x ekseni boyunca Ã§izer. BaÅŸka bir deyiÅŸle, her nokta bu ses Ã¶rnekleme sÄ±rasÄ±nda alÄ±nan tek bir Ã¶rnek deÄŸerine karÅŸÄ±lÄ±k gelir. AyrÄ±ca, librosa sesi zaten kayan noktalÄ± deÄŸerler olarak dÃ¶ndÃ¼rÃ¼yor ve genlik deÄŸerlerinin gerÃ§ekten [-1.0, 1.0] aralÄ±ÄŸÄ±nda olduÄŸunu unutmayÄ±n.


Ses verilerini dinlerken ve gÃ¶rselleÅŸtirirken, Ã¼zerinde Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ±z verileri anlamak iÃ§in kullanÄ±ÅŸlÄ± bir araÃ§ olabilir. Sinyalin ÅŸeklini gÃ¶rebilir, desenleri gÃ¶zlemleyebilir, gÃ¼rÃ¼ltÃ¼ veya bozulma belirlemeyi Ã¶ÄŸrenebilirsiniz. Veriyi normalizasyon, yeniden Ã¶rnekleme veya filtreleme gibi bazÄ± yÃ¶ntemlerle Ã¶n iÅŸlediyseniz, Ã¶n iÅŸleme adÄ±mlarÄ±nÄ±n beklenildiÄŸi gibi uygulandÄ±ÄŸÄ±nÄ± gÃ¶rsel olarak doÄŸrulayabilirsiniz. Bir modeli eÄŸittikten sonra (Ã¶rneÄŸin, ses sÄ±nÄ±flandÄ±rma gÃ¶revinde) hata oluÅŸan Ã¶rnekleri gÃ¶rselleÅŸtirebilir ve sorunu gidermek iÃ§in kullanabilirsiniz.

## Frekans spektrumu

Ses verilerini gÃ¶rselleÅŸtirmenin baÅŸka bir yolu da *frekans alanÄ±* olarak da bilinen bir ses sinyalinin **frekans spektrumunu** Ã§izmektir.
temsil. Spektrum, ayrÄ±k Fourier dÃ¶nÃ¼ÅŸÃ¼mÃ¼ veya DFT kullanÄ±larak hesaplanÄ±r. Bireysel frekanslarÄ± tanÄ±mlar
sinyali oluÅŸturanlar ve ne kadar gÃ¼Ã§lÃ¼ olduklarÄ±.

Numpy'nin `rfft()` fonksiyonunu kullanarak DFT'yi alarak aynÄ± trompet sesi iÃ§in frekans spektrumunu Ã§izelim. Olurken
TÃ¼m sesin spektrumunu Ã§izmek mÃ¼mkÃ¼n olsa da bunun yerine kÃ¼Ã§Ã¼k bir bÃ¶lgeye bakmak daha kullanÄ±ÅŸlÄ±dÄ±r. Ä°ÅŸte alacaÄŸÄ±z
kabaca Ã§alÄ±nan ilk notanÄ±n uzunluÄŸuna eÅŸit olan ilk 4096 Ã¶rnekteki DFT:

```py
import numpy as np

dft_input = array[:4096]

# DFT hesapla
window = np.hanning(len(dft_input))
windowed_input = dft_input * window
dft = np.fft.rfft(windowed_input)

# genlik spektrumunu desibel cinsinden elde edin
amplitude = np.abs(dft)
amplitude_db = librosa.amplitude_to_db(amplitude, ref=np.max)

# frekans kutularÄ±nÄ± al
frequency = librosa.fft_frequencies(sr=sampling_rate, n_fft=len(dft_input))

plt.figure().set_figwidth(12)
plt.plot(frequency, amplitude_db)
plt.xlabel("Frequency (Hz)")
plt.ylabel("Amplitude (dB)")
plt.xscale("log")
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/spectrum_plot.png" alt="Spectrum plot">
</div>

Bu, bu ses bÃ¶lÃ¼mÃ¼nde mevcut olan Ã§eÅŸitli frekans bileÅŸenlerinin gÃ¼cÃ¼nÃ¼ gÃ¶sterir. Frekans deÄŸerleri aÃ§Ä±k
x ekseni genellikle logaritmik Ã¶lÃ§ekte Ã§izilir, genlikleri ise y ekseni Ã¼zerindedir.

Ã‡izdiÄŸimiz frekans spektrumu birkaÃ§ tepe noktasÄ± gÃ¶steriyor. Bu tepeler notanÄ±n harmoniklerine karÅŸÄ±lÄ±k gelir.
yÃ¼ksek harmonikler daha sessiz olacak ÅŸekilde Ã§alÄ±nÄ±r. Ä°lk zirve 620 Hz civarÄ±nda olduÄŸundan, bu bir Eâ™­ notasÄ±nÄ±n frekans spektrumudur.

DFT'nin Ã§Ä±ktÄ±sÄ±, gerÃ§el ve sanal bileÅŸenlerden oluÅŸan karmaÅŸÄ±k sayÄ±larÄ±n bir dizisidir. np.abs(dft) ile magnitÃ¼d, spektrogramdan genlik bilgisini Ã§Ä±karÄ±r. GerÃ§ek ve sanal bileÅŸenler arasÄ±ndaki aÃ§Ä±, sÃ¶zde faz spektrumunu saÄŸlar, ancak bu genellikle makine Ã¶ÄŸrenme uygulamalarÄ±nda atlanÄ±r veya kullanÄ±lmaz.

Genlik deÄŸerlerini desibel Ã¶lÃ§eÄŸine dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in `librosa.amplitude_to_db()` kullandÄ±nÄ±z, bÃ¶ylece gÃ¶rmeyi kolaylaÅŸtÄ±rdÄ±nÄ±z
spektrumdaki daha ince ayrÄ±ntÄ±lar. Bazen insanlar genlik yerine enerjiyi Ã¶lÃ§en **gÃ¼Ã§ spektrumunu** kullanÄ±r;
bu sadece genlik deÄŸerlerinin karesi olan bir spektrumdur.

<Tip>
ğŸ’¡ Pratikte insanlar FFT terimini DFT ile birbirinin yerine kullanÄ±rlar Ã§Ã¼nkÃ¼ FFT veya HÄ±zlÄ± Fourier DÃ¶nÃ¼ÅŸÃ¼mÃ¼ tek etkili yÃ¶ntemdir.
DFT'yi bilgisayarda hesaplamanÄ±n yolu.
</Tip>

Bir ses sinyalinin frekans spektrumu, dalga biÃ§imiyle tamamen aynÄ± bilgiyi iÃ§erir; bunlar yalnÄ±zca iki farklÄ±dÄ±r
aynÄ± verilere bakmanÄ±n yollarÄ± (burada trompet sesinden ilk 4096 Ã¶rnek). Dalga formunun genliÄŸi Ã§izdiÄŸi yer
Ses sinyalinin zaman iÃ§indeki deÄŸiÅŸimini saÄŸlayan spektrum, zaman iÃ§inde sabit bir noktada bireysel frekanslarÄ±n genliklerini gÃ¶rselleÅŸtirir.

## Spektrogram

Bir ses sinyalindeki frekanslarÄ±n nasÄ±l deÄŸiÅŸtiÄŸini gÃ¶rmek istersek ne olur? Trompet birkaÃ§ nota Ã§alÄ±yor ve hepsinde
farklÄ± frekanslar. Sorun, spektrumun yalnÄ±zca belirli bir andaki frekanslarÄ±n donmuÅŸ anlÄ±k gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ gÃ¶stermesidir.
Ã‡Ã¶zÃ¼m, her biri yalnÄ±zca kÃ¼Ã§Ã¼k bir zaman dilimini kapsayan birden fazla DFT almak ve elde edilen spektrumlarÄ± bir araya toplamaktÄ±r.
**spektrograma** dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼r.

Spektrogram, zaman iÃ§inde deÄŸiÅŸen bir ses sinyalinin frekans iÃ§eriÄŸini Ã§izer. ZamanÄ±, sÄ±klÄ±ÄŸÄ± gÃ¶rmenizi saÄŸlar,
ve genlik hepsi tek bir grafikte. Bu hesaplamayÄ± gerÃ§ekleÅŸtiren algoritma STFT veya KÄ±sa ZamanlÄ± Fourier DÃ¶nÃ¼ÅŸÃ¼mÃ¼dÃ¼r.

Spektrogram, kullanabileceÄŸiniz en bilgilendirici ses araÃ§larÄ±ndan biridir. Ã–rneÄŸin bir mÃ¼zik kaydÄ±yla Ã§alÄ±ÅŸÄ±rken,
Ã§eÅŸitli enstrÃ¼manlarÄ± ve vokal parÃ§alarÄ±nÄ± ve bunlarÄ±n genel sese nasÄ±l katkÄ±da bulunduÄŸunu gÃ¶rebilirsiniz. KonuÅŸmada ÅŸunlarÄ± yapabilirsiniz:
Her sesli harf belirli frekanslarla karakterize edildiÄŸinden farklÄ± sesli harfleri tanÄ±mlayÄ±n.


Librosa'nÄ±n "stft()" ve "specshow()" iÅŸlevlerini kullanarak aynÄ± trompet sesi iÃ§in bir spektrogram Ã§izelim:

```py
import numpy as np

D = librosa.stft(array)
S_db = librosa.amplitude_to_db(np.abs(D), ref=np.max)

plt.figure().set_figwidth(12)
librosa.display.specshow(S_db, x_axis="time", y_axis="hz")
plt.colorbar()
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/spectrogram_plot.png" alt="Spectrogram plot">
</div>

Bu Ã§izimde, x ekseni dalga biÃ§imi gÃ¶rselleÅŸtirmesinde olduÄŸu gibi zamanÄ± temsil eder, ancak artÄ±k y ekseni Hz cinsinden frekansÄ± temsil eder.
Rengin yoÄŸunluÄŸu, zamanÄ±n her noktasÄ±nda frekans bileÅŸeninin desibel (dB) cinsinden Ã¶lÃ§Ã¼len genliÄŸini veya gÃ¼cÃ¼nÃ¼ verir.

Spektrogram, genellikle birkaÃ§ milisaniye sÃ¼ren ses sinyalinin kÄ±sa segmentlerini alarak oluÅŸturulur ve her segmentin frekans spektrumunu elde etmek iÃ§in her segmentin ayrÄ±k Fourier dÃ¶nÃ¼ÅŸÃ¼mÃ¼nÃ¼ hesaplar. Elde edilen spektrumlar daha sonra zaman ekseni Ã¼zerine Ã¼st Ã¼ste konur ve spektrogramu oluÅŸturmak iÃ§in bir araya getirilir. Bu gÃ¶rÃ¼ntÃ¼de her dikey dilim, Ã¼stten gÃ¶rÃ¼ldÃ¼ÄŸÃ¼nde tek bir frekans spektrumuna karÅŸÄ±lÄ±k gelir. VarsayÄ±lan olarak, librosa.stft() ses sinyalini 2048 Ã¶rneklik segmentlere bÃ¶ler, bu da frekans Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼ ve zaman Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼ arasÄ±nda iyi bir denge saÄŸlar.


Spektrogram ve dalga formu, aynÄ± verinin farklÄ± gÃ¶rÃ¼nÃ¼mleridir, bu nedenle spektrogramu orijinal dalga forma dÃ¶ndÃ¼rmek mÃ¼mkÃ¼ndÃ¼r, ancak bunun iÃ§in genlik bilgisi dÄ±ÅŸÄ±nda faz bilgisine de ihtiyaÃ§ vardÄ±r. EÄŸer spektrogram bir makine Ã¶ÄŸrenme modeli tarafÄ±ndan Ã¼retildiyse, genellikle yalnÄ±zca genlikleri Ã§Ä±karÄ±r. Bu durumda, Griffin-Lim gibi klasik bir faz yeniden yapÄ±landÄ±rma algoritmasÄ± veya bir vokoder olarak adlandÄ±rÄ±lan bir sinir aÄŸÄ± kullanarak spektrogramdan bir dalga formunu yeniden oluÅŸturabilirsiniz.

Spektrogramlar yalnÄ±zca gÃ¶rselleÅŸtirme iÃ§in kullanÄ±lmaz. BirÃ§ok makine Ã¶ÄŸrenimi modeli, girdi olarak spektrogramlarÄ± alÄ±r.
dalga formlarÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r ve Ã§Ä±ktÄ± olarak spektrogramlar Ã¼retir.

ArtÄ±k spektrogramÄ±n ne olduÄŸunu ve nasÄ±l yapÄ±ldÄ±ÄŸÄ±nÄ± bildiÄŸimize gÃ¶re, konuÅŸma iÅŸlemede yaygÄ±n olarak kullanÄ±lan bir Ã§eÅŸidine bakalÄ±m: mel spektrogramÄ±.

## Mel spektrogramÄ±

Mel spektrogramÄ±, konuÅŸma iÅŸleme ve makine Ã¶ÄŸrenimi gÃ¶revlerinde yaygÄ±n olarak kullanÄ±lan spektrogramÄ±n bir Ã§eÅŸididir.
Bir ses sinyalinin zaman iÃ§indeki frekans iÃ§eriÄŸini ancak farklÄ± bir frekans ekseninde gÃ¶stermesi bakÄ±mÄ±ndan spektrograma benzer.

Standart bir spektrogramda frekans ekseni doÄŸrusaldÄ±r ve hertz (Hz) cinsinden Ã¶lÃ§Ã¼lÃ¼r. Ancak insanÄ±n iÅŸitme sistemi
dÃ¼ÅŸÃ¼k frekanslardaki deÄŸiÅŸikliklere yÃ¼ksek frekanslardan daha duyarlÄ±dÄ±r ve bu duyarlÄ±lÄ±k logaritmik olarak azalÄ±r
frekans arttÄ±kÃ§a. Mel Ã¶lÃ§eÄŸi, insan kulaÄŸÄ±nÄ±n doÄŸrusal olmayan frekans tepkisine yaklaÅŸan algÄ±sal bir Ã¶lÃ§ektir.

Bir mel spektrogramÄ± oluÅŸturmak iÃ§in STFT, daha Ã¶nce olduÄŸu gibi kullanÄ±lÄ±r ve bir dizi elde etmek iÃ§in sesi kÄ±sa bÃ¶lÃ¼mlere ayÄ±rÄ±r.
frekans spektrumlarÄ±. Ek olarak, her spektrum mel filtre bankasÄ± olarak adlandÄ±rÄ±lan bir dizi filtre aracÄ±lÄ±ÄŸÄ±yla gÃ¶nderilir.
frekanslarÄ± mel Ã¶lÃ§eÄŸine dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n.

TÃ¼m bu adÄ±mlarÄ± bizim iÃ§in gerÃ§ekleÅŸtiren librosa'nÄ±n melspectrogram() fonksiyonunu kullanarak bir mel spektrogramÄ±nÄ± nasÄ±l Ã§izebileceÄŸimizi gÃ¶relim:

```py
S = librosa.feature.melspectrogram(y=array, sr=sampling_rate, n_mels=128, fmax=8000)
S_dB = librosa.power_to_db(S, ref=np.max)

plt.figure().set_figwidth(12)
librosa.display.specshow(S_dB, x_axis="time", y_axis="mel", sr=sampling_rate, fmax=8000)
plt.colorbar()
```

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/mel-spectrogram.png" alt="Mel spectrogram plot">
</div>


YukarÄ±daki Ã¶rnekte, n_mels, oluÅŸturulacak mel bantlarÄ±nÄ±n sayÄ±sÄ±nÄ± ifade eder. Mel bantlarÄ±, spektrumu insan iÅŸitmesinin farklÄ± frekanslara nasÄ±l tepki verdiÄŸini taklit etmek iÃ§in seÃ§ilen bir dizi filtre kullanarak algÄ±sal olarak anlamlÄ± bileÅŸenlere bÃ¶len frekans aralÄ±klarÄ±nÄ± tanÄ±mlar. n_mels iÃ§in yaygÄ±n deÄŸerler 40 veya 80'dir. fmax, Ã¶nem verdiÄŸimiz en yÃ¼ksek frekansÄ± (Hz cinsinden) belirtir.


DÃ¼zenli bir spektrogramda olduÄŸu gibi, mel frekans bileÅŸenlerinin gÃ¼cÃ¼nÃ¼ desibel cinsinden ifade etmek yaygÄ±n bir uygulamadÄ±r. Bu genellikle bir **log-mel spektrogramu* olarak adlandÄ±rÄ±lÄ±r, Ã§Ã¼nkÃ¼ desibellere dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi logaritmik bir iÅŸlem iÃ§erir. YukarÄ±daki Ã¶rnek, librosa.feature.melspectrogram() bir gÃ¼Ã§ spektrogramu oluÅŸturduÄŸu iÃ§in librosa.power_to_db() kullanmÄ±ÅŸtÄ±r.

<Tip>
ğŸ’¡ TÃ¼m mel spektrogramlarÄ± aynÄ± deÄŸildir! YaygÄ±n olarak kullanÄ±lan iki farklÄ± mel Ã¶lÃ§eÄŸi vardÄ±r ("htk" ve "slaney"), ve gÃ¼Ã§ spektrogramu yerine genlik spektrogramu kullanÄ±labilir. Log-mel spektrogramuna dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi her zaman gerÃ§ek desibelleri hesaplamaz, sadece log alabilir. Bu nedenle, bir makine Ã¶ÄŸrenme modeli bir mel spektrogramunu girdi olarak bekliyorsa, bunu aynÄ± ÅŸekilde hesapladÄ±ÄŸÄ±nÄ±zdan emin olmak iÃ§in dikkatlice kontrol edin.
</Tip>

Bir mel spektrogramu oluÅŸturmak, sinyali filtrelemeyi iÃ§erdiÄŸi iÃ§in kayÄ±plÄ± bir iÅŸlemdir. Bir mel spektrogramunu bir dalga forma dÃ¶nÃ¼ÅŸtÃ¼rmek, bir dÃ¼zenli spektrogram iÃ§in bunu yapmaktan daha zordur, Ã§Ã¼nkÃ¼ atÄ±lan frekanslarÄ± tahmin etmeyi gerektirir. Bu nedenle, mel spektrogramundan bir dalga formu Ã¼retmek iÃ§in HiFiGAN gibi vokoder gibi makine Ã¶ÄŸrenme modellerine ihtiyaÃ§ vardÄ±r.

Standart bir spektrogramla karÅŸÄ±laÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda, bir mel spektrogramÄ± ses sinyalinin daha anlamlÄ± Ã¶zelliklerini yakalayabilir.
insan algÄ±sÄ±, konuÅŸma tanÄ±ma, konuÅŸmacÄ±yÄ± tanÄ±mlama ve mÃ¼zik tÃ¼rÃ¼ sÄ±nÄ±flandÄ±rmasÄ± gibi gÃ¶revlerde onu popÃ¼ler bir seÃ§im haline getiriyor.

ArtÄ±k ses verisi Ã¶rneklerini nasÄ±l gÃ¶rselleÅŸtireceÄŸinizi bildiÄŸinize gÃ¶re, en sevdiÄŸiniz seslerin nasÄ±l gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nÃ¼ gÃ¶rmeye Ã§alÄ±ÅŸÄ±n. :)
